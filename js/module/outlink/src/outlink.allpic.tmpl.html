<!--
    分享的全是图片
-->
<script id="outlink_allpic" type="text/html" nowith="yes">
    <%
        var fileList = data || [],
            picUrl,
            img,
            name = '';
    %>
    <div id="lay-main-con" class="lay-main-con">
        <div class="inner">
            <div class="wrap">
                <div id="photo-view" data-count="<%=fileList.length%>" class="dirs photo-view share-file-list">
                    <%for(var i = 0, len = fileList.length; i < len; i++) {
                        picUrl = fileList[i].thumb_url;
                        name = fileList[i].file_name;
                        picUrl = picUrl + (name.slice(-3) === 'gif' ? '' : '&size=640*640');
                        img = new Image();
                        img.src = 
                        %>
                        <div data-list="true" id="<%=fileList[i]['file_id']%>" data-record-id="<%=fileList[i]['file_id']%>" class="share-file photo-view-list">
                            <a href="javascript:void(0)" class="photo-view-list-link">
                                <img src="<%=picUrl%>" onload="var width = this.width,height = this.height;if(width >= 266 && height >= 266) {if(height > width) {this.style.width = '266px';this.style.height = height * 266 / width + 'px';height = height * 266 / width;width = 266;} else {this.style.height = '266px';this.style.width = width * 266 / height + 'px';width = width * 266 / height;height = 266;}}this.style.margin = (266 - height) / 2 + 'px ' + (266 - width) / 2 + 'px';"/>
                                <span class="photo-view-list-checkbox checkbox"></span>
                                <span class="photo-view-list-mask"></span>
                            </a>
                        </div>
                    <%}%>
                </div>
            </div>
        </div>
    </div>
</script>