<!DOCTYPE HTML>
<html lang="zh-cn">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Language" content="zh-cn" />
<meta http-equiv="X-UA-Compatible" content = "IE=edge,chrome=1" />
<meta name="author" content="jinfu;cppgohan@gmail.com" />
<meta name="Copyright" content="Tencent" />
<title>{title}</title>
<style type="text/css">
body{
    margin: 0;
    padding: 12px;
    font-size: 14px;
    color: #020202;
    font-family: "Microsoft YaHei";
}
.notes .remark{
    border: 1px #d8dce5 solid;
    padding: 8px;
    display:none;
}
.notes .remark h2{
    margin: 0;
    padding: 0;
    font-size: 14px;
}
.notes .remark .con,
.notes .remark .j-max{
    padding-top: 10px;
    line-height: 1.7;
    font-size: 12px;
    word-break:break-all;
    word-wrap:break-word;
}
.notes .remark .con .box{
    -webkit-transition:max-height .4s;
    transition:max-height .4s;
    max-height: 37px;
    _height:37px;
    overflow: hidden;
}
.notes .remark .j-max .box{
    max-height: 271px;
    overflow: auto;
}
.notes .remark p{
    margin: 0;
    padding-bottom: 10px;
}
.notes .remark .toggle{
    padding-right: 10px;
    text-align: right;
    color: #868686;
    cursor: pointer;
    padding-top: 5px;
}
.notes .remark .close i{
    display: inline-block;
    width:0;height:0;overflow:hidden;font-size:0;line-height:0;
    border-width:4px;
    border-color:#bababa transparent transparent transparent;
    border-style:solid dashed dashed dashed;
    vertical-align: bottom;
    margin-left: 5px;
    cursor: pointer;
    margin-bottom: 3px;
}
.notes .remark .j-open i{
    border-color:transparent transparent #bababa transparent;
    border-style:dashed dashed solid dashed;
    vertical-align: top;
    margin-top: 3px;
    _margin-top:-2px;
    _border-width:5px;
}
.edit-remark{
    position: absolute;
    display: block;
    right: 5px;
    top: 5px;
    width: 42px;
    height: 42px;
    background: url(edit-remark.png) no-repeat center center;
    _background: none;
    _filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='edit-remark.png', sizingMethod='crop');
    color: #ffffff;
    text-decoration: none;
    font-size: 12px;
    text-align: center;
    line-height: 1.2;
    cursor: pointer;
    filter:alpha(opacity=70);
    opacity:.70;
}
.edit-remark:hover{
    filter:alpha(opacity=100);
    opacity:1;
}
.edit-remark span{
    display: inline-block;
    padding-top: 7px;
    cursor: pointer;
}
.notes .container h1{
    margin: 15px 0 5px 0;
    font-size: 26px;
    font-weight: normal;
}
.notes .container .info{
    color: #868686;
    font-size: 12px;
}
.notes .container .info span.link{
    display: inline-block;
    margin-left: 10px;
}
.notes .container .info a.link{
    text-decoration: none;
    color: #1284f6; 
}
.notes .container .con{
    padding-top: 15px;
    padding-right: 10px;
    line-height: 1.7;
    word-break:break-all;
    word-wrap:break-word;
}
.notes .container .con p{
    margin: 0;
    padding: 0 0 15px 0;
}
.notes .container .con img{
    max-width: 100%;
    margin: 10px 0 10px 0;
}

/* webkit 滚动条 */
::-webkit-scrollbar{width:8px;height:10px;border-radius:0;background-color:#f5f6f9;border:solid 1px #eff1f5}::-webkit-scrollbar:hover{background:#DCE1E4}::-webkit-scrollbar-thumb{background-color:#d8dce5}::-webkit-scrollbar-thumb:hover{background-color:#9198a6;border-color:#9198a6}::-webkit-scrollbar-arrow{color:red;background:#0F0}::-webkit-scrollbar-button{width:8px;height:10px;border:1px solid #B5BBBF;display:none}::-webkit-scrollbar-button:hover{border-color:#5F6366}::-webkit-scrollbar-button:vertical:end:decrement,::-webkit-scrollbar-button:vertical:start:increment{display:none}
</style>
</head>
	<body class="notes">
    <div id="remark-box" class="remark">
        <h2>备注：</h2>
        <div id="remark" class="con">
            <div class="box" data-box-parent="true"><div data-box="true">{beizhu}</div></div>
            <div id="remark-toggle" class="toggle close"><span data-toggle="true" class="j-txt">展开</span><i></i></div>
        </div>
    </div>
        <a id="edit-remark" href="#" class="edit-remark" onclick="editRemark(current_sessionid)"><span>修改<br>备注</span></a>
    <div id="container" class="container">
        <h1>{title}</h1>
        <div class="info"><span id="container-time" class="time">二月 18th,2014</span> | <span class="source">源网页:</span><span class="link"><a class="link" href="{source_url}" target="_blank">{tt_source}</a></span></div>
        <div class="con">
            {body}
        </div>
    </div>
    <script type="text/javascript" src="https://img.weiyun.com/c/=/club/weiyun/js/publics/jquery/jquery-1.8.3.min.js"></script>
    <script>
    document.domain="weiyun.com";
    var jin={};
    jin.wClientWidth= function(r) {
        var d = document;
        if (!jin._clientWidth || r) {
            jin._clientWidth = d.documentElement.clientWidth;
        }
        return jin._clientWidth;
    };
    jin.broIe = /msie (\d+\.\d+)/i.test(navigator.userAgent) ? (document.documentMode || +RegExp['\x241']) : undefined;
    jin.borIe6 = function(){
        if(jin.broIe=="6"){
            return true;
        }else{
            return false;
        }
    };
    var current_sessionid=null;

    /*修改备注*/
    var editRemark=function(sessionid){
        if(window.external.CallWeiyunClient_OnChangeTextTipsClick){
            window.external.CallWeiyunClient_OnChangeTextTipsClick(sessionid);
        }else if(parent.call_save_article){
            parent.call_save_article();
        }
    };
    
    var setSessionId=function(sessionid){
        current_sessionid = sessionid;
    };

    /*时间*/
    var containerTime=function(time){
        $("#container-time").html(time);
    };

    var setButtonTxt=function(html){
        $("#edit-remark").children("span").html(html);
    }

    /*备注填充*/
    var remarkTxt=function(txt){
        if(txt==""){
            $("#remark-box").hide();
            setButtonTxt("添加<BR>备注");
        }else{
            $("#remark-box").show();
            txt=txt.replace(/[\r\n]+/g, '<br />');
            $("#remark").find("[data-box]").html(txt);
            setButtonTxt("修改<BR>备注");
        }
        /*高度不足，隐藏展开按钮*/
        if($("#remark").find("[data-box]").height()>37){
            $("#remark-toggle").show();
        }else{
            $("#remark-toggle").hide();
        }
    };

    /*展开，收起*/
    (function(){
        var _remark=$("#remark");
        $("#remark-toggle").on("click",function(){
            var _this=$(this);
            if(_remark.hasClass('j-max')){
                _this.find("[data-toggle]").html("展开");
                _this.removeClass('j-open');
                _remark.removeClass('j-max');
                if(jin.borIe6()){
                    if(parseInt(_remark.find("[data-box]").height())>37){
                        _remark.find("[data-box]").parent().height(37);
                    }else{
                        _remark.find("[data-box]").parent().height("auto");
                    }
                }
            }else{
                _this.find("[data-toggle]").html("收起");
                _this.addClass('j-open');
                _remark.addClass('j-max');
                if(jin.borIe6()){
                    if(parseInt(_remark.find("[data-box]").height())>271){
                        _remark.find("[data-box]").parent().height(271);
                    }else{
                        _remark.find("[data-box]").parent().height("auto");
                    }
                }
            }
            return false;
        });

        // 需要重设一下备注
        text = $("#remark").find("[data-box]").text();
        remarkTxt(text);

        // 清掉{body}里的标题
        $(".tc_title").remove();

        if (window.external.CallWeiyunClient_WebPageLoadComplete) {
            window.external.CallWeiyunClient_WebPageLoadComplete();
        }
    })();

    /*ie6不支持min-width补丁*/
    $(window).load(function(){
        if(jin.borIe6()){
            $("#container").find("img").each(function(){
                if($(this).width()>jin.wClientWidth()){
                    $(this).width(jin.wClientWidth()-40);
                }
            });
        }
    });
    </script>
    </body>
</html>